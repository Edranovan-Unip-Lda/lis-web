 @if (!isSuccess) {
 <div class="w-full" style="background: var(--surface-ground)">
     <p-fluid class="text-center w-full flex items-center md:items-center flex-col bg-auto md:bg-contain !bg-no-repeat">
         <div class="flex flex-col">
             <div class="flex items-center justify-center">
                 <img src="/images/logo.png" style="width:85px" alt="mci-logo" />
             </div>
             <div class="mt-2 mb-8">
                 <p class="text-2xl font-bold">
                     Sistema de Gestão de <br> Licenças Comerciais e Indústriais
                 </p>
             </div>
         </div>
     </p-fluid>


     <div class="w-full px-8">
         <p-stepper [value]="1" class="basis-[50rem]" [linear]="true">
             <p-step-list>
                 <p-step [value]="1">Empresa</p-step>
                 <p-step [value]="2">Proprietário(a) / Titular da empresa</p-step>
                 <p-step [value]="3">Gerente & Representante</p-step>
                 <p-step [value]="4">Conta de Acesso</p-step>
                 <p-step [value]="5">Confirmação</p-step>
             </p-step-list>
             <p-step-panels>
                 <p-step-panel [value]="1">
                     <ng-template #content let-activateCallback="activateCallback">
                         <form [formGroup]="empresaForm">
                             <div class="grid grid-cols-12 gap-4">
                                 <div class="mb-6 col-span-12">
                                     <label for="nome" class="font-medium  mb-2 block">
                                         Nome da Empresa
                                     </label>
                                     <input formControlName="nome" id="nome" type="text" pInputText fluid />
                                     @if (empresaForm.get('nome')?.touched && empresaForm.get('nome')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="sociedadeComercial" class="font-medium  mb-2 block">
                                         Tipo de Sociedade Comercial
                                     </label>
                                     <p-select fluid formControlName="sociedadeComercial"
                                         [options]="listaSociedadeComercial" optionLabel="nome"
                                         (onChange)="sociedadeComercialOnChange($event)"
                                         placeholder="Selecione o tipo de sociedade" [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('sociedadeComercial')?.touched &&
                                     empresaForm.get('sociedadeComercial')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="nif" class="font-medium  mb-2 block">
                                         NIF da Empresa
                                     </label>
                                     <input formControlName="nif" id="nif" type="text" pInputText fluid />
                                     @if (empresaForm.get('nif')?.touched &&
                                     empresaForm.get('nif')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="numeroRegistoComercial" class="font-medium  mb-2 block">
                                         Nº Registo Comercial
                                     </label>
                                     <input formControlName="numeroRegistoComercial" id="numeroRegistoComercial"
                                         type="text" pInputText fluid />
                                     @if (empresaForm.get('numeroRegistoComercial')?.touched &&
                                     empresaForm.get('numeroRegistoComercial')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="capitalSocial" class="font-medium  mb-2 block">
                                         Capital Social
                                     </label>
                                     <p-inputgroup>
                                         <p-inputgroup-addon>$</p-inputgroup-addon>
                                         <p-inputnumber formControlName="capitalSocial" mode="decimal"
                                             [minFractionDigits]="2" [maxFractionDigits]="2" />
                                     </p-inputgroup>
                                     @if (empresaForm.get('capitalSocial')?.touched &&
                                     empresaForm.get('capitalSocial')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="dataRegisto" class="font-medium  mb-2 block">
                                         Data de Registo
                                     </label>
                                     <p-date-picker formControlName="dataRegisto" id="dataRegisto" [showIcon]="true"
                                         [showButtonBar]="true" fluid dateFormat="dd/mm/yy" inputStyleClass="w-full" />
                                     @if (empresaForm.get('dataRegisto')?.touched &&
                                     empresaForm.get('dataRegisto')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="totalTrabalhadores" class="font-medium mb-2 block">
                                         Total Trabalhadores (Funcionários)
                                     </label>
                                     <input formControlName="totalTrabalhadores" id="totalTrabalhadores" type="text"
                                         pInputText fluid />
                                     @if (empresaForm.get('totalTrabalhadores')?.touched &&
                                     empresaForm.get('totalTrabalhadores')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="volumeNegocioAnual" class="font-medium mb-2 block">
                                         Volume de Negócios Anual
                                     </label>
                                     <p-inputgroup>
                                         <p-inputgroup-addon>$</p-inputgroup-addon>
                                         <p-inputnumber formControlName="volumeNegocioAnual" mode="decimal"
                                             [minFractionDigits]="2" [maxFractionDigits]="2" />
                                     </p-inputgroup>
                                     @if (empresaForm.get('volumeNegocioAnual')?.touched &&
                                     empresaForm.get('volumeNegocioAnual')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="balancoTotalAnual" class="font-medium  mb-2 block">
                                         Balanço total Anual
                                     </label>
                                     <p-inputgroup>
                                         <p-inputgroup-addon>$</p-inputgroup-addon>
                                         <p-inputnumber formControlName="balancoTotalAnual" mode="decimal"
                                             [minFractionDigits]="2" [maxFractionDigits]="2" />
                                     </p-inputgroup>
                                     @if (empresaForm.get('balancoTotalAnual')?.touched &&
                                     empresaForm.get('balancoTotalAnual')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="col-span-12">
                                     <div formGroupName="sede" class="grid grid-cols-12">
                                         <div class="mb-6 col-span-12">
                                             <label for="local" class="font-medium  mb-2 block">
                                                 Sede
                                             </label>
                                             <input formControlName="local" id="local" type="text" pInputText fluid
                                                 placeholder="ex. Av. Pres. Nicolau Lobato" />
                                             @if (empresaForm.get('sede.local')?.touched &&
                                             empresaForm.get('sede.local')?.invalid) {
                                             <p class="text-red-500 text-sm mt-1">
                                                 Este campo é obrigatório e deve ser válido.
                                             </p>
                                             }
                                         </div>
                                         <div class="mb-6 col-span-12">
                                             <div class="flex flex-col sm:flex-row sm:items-center gap-6">
                                                 <div class="flex-auto">
                                                     <label for="aldeia" class="font-medium  mb-2 block">
                                                         Aldeia
                                                     </label>
                                                     <p-select fluid formControlName="aldeia" [options]="aldeias"
                                                         optionLabel="nome" placeholder="Selecione a Aldeia"
                                                         [filter]="true" filterBy="nome" [showClear]="true"
                                                         (onFilter)="aldeiaFilter($event)" (onpanelHide)="onPanelHide()"
                                                         (onChange)="aldeiaOnChange($event)" (onClear)="onPanelHide()">
                                                     </p-select>
                                                     @if (empresaForm.get('sede.aldeia')?.touched &&
                                                     empresaForm.get('sede.aldeia')?.invalid) {
                                                     <p class="text-red-500 text-sm mt-1">
                                                         Este campo é obrigatório e deve ser válido.
                                                     </p>
                                                     }
                                                 </div>
                                                 <div class="flex-auto">
                                                     <label for="suco" class="font-medium  mb-2 block">
                                                         Suco
                                                     </label>
                                                     <input formControlName="suco" id="suco" type="text" pInputText
                                                         fluid />
                                                 </div>
                                                 <div class="flex-auto">
                                                     <label for="posto" class="font-medium  mb-2 block">
                                                         Posto Administrativo
                                                     </label>
                                                     <input formControlName="postoAdministrativo"
                                                         id="postoAdministrativo" type="text" pInputText fluid />
                                                 </div>
                                                 <div class="flex-auto">
                                                     <label for="municipio" class="font-medium  mb-2 block">
                                                         Municipio
                                                     </label>
                                                     <input formControlName="municipio" id="municipio" type="text"
                                                         pInputText fluid />
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-1 flex items-end justify-center">
                                     <p-button (click)="getCurrentPosition()" icon="pi pi-map-marker" />
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-5">
                                     <label for="longitude" class="font-medium mb-2 block">
                                         Longitude
                                     </label>
                                     <input formControlName="longitude" id="longitude" type="number" pInputText fluid />
                                     @if (empresaForm.get('longitude')?.touched &&
                                     empresaForm.get('longitude')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-5">
                                     <label for="latitude" class="font-medium mb-2 block">
                                         Latitude
                                     </label>
                                     <input formControlName="latitude" id="latitude" type="number" pInputText fluid />
                                     @if (empresaForm.get('latitude')?.touched &&
                                     empresaForm.get('latitude')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="telemovel" class="font-medium mb-2 block">
                                         Nº Telemóvel
                                     </label>
                                     <input formControlName="telemovel" id="telemovel" type="tel" pInputText fluid />
                                     @if (empresaForm.get('telemovel')?.touched &&
                                     empresaForm.get('telemovel')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="telefone" class="font-medium mb-2 block">
                                         Nº Telefone
                                     </label>
                                     <input formControlName="telefone" id="telefone" type="tel" pInputText fluid />
                                     @if (empresaForm.get('telefone')?.touched &&
                                     empresaForm.get('telefone')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="email" class="font-medium  mb-2 block">
                                         Email
                                     </label>
                                     <input formControlName="email" id="email" type="email" pInputText fluid />
                                     @if (empresaForm.get('email')?.touched &&
                                     empresaForm.get('email')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12">
                                     <label for="outrosDocumentos" class="font-medium  mb-2 block">
                                         DOCUMENTOS
                                     </label>
                                     <ul class="list-decimal     list-inside mb-2">
                                         <li>
                                             Certidão de Registo Comercial
                                         </li>
                                         <li>
                                             Estatuto da Empresa
                                         </li>
                                         <li>
                                             NIF da Empresa
                                         </li>
                                         <li>
                                             Relatório do imposto sobre o rendimento anual
                                         </li>
                                         <li>
                                             Documento de Identificação do(s) Proprietário(s) / Acionista(s)
                                         </li>
                                     </ul>
                                     <div class="flex justify-start">
                                         <p-fileupload name="files" method="post" (onSelect)="onSelect($event)"
                                             [fileLimit]="5" [maxFileSize]="maxFileSize" [multiple]="true"
                                             accept="application/pdf" [showUploadButton]="false"
                                             [showCancelButton]="false" mode="basic" [chooseLabel]="'Selecionar'"
                                             [customUpload]="true" chooseIcon="pi pi-upload">
                                         </p-fileupload>
                                     </div>
                                     @for (item of uploadedDocs; track $index) {
                                     <li>
                                         <a class="cursor-pointer hover:underline hover:text-teal-300">
                                             {{ item.name }} - {{ bytesToMBs(item.size) }}
                                         </a>
                                         &nbsp;
                                         <p-button icon="pi pi-times" [rounded]="true" [text]="true" severity="danger"
                                             (onClick)="onFileRemove({file: item})" />
                                     </li>
                                     }
                                 </div>
                             </div>
                         </form>
                         <div class="flex pt-6 justify-between">
                             <span class="font-medium text-surface-600 dark:text-surface-200">Já tem conta? <a
                                     [routerLink]="['/auth/login']"
                                     class="font-semibold cursor-pointer  hover:text-primary transition-colors duration-300">Entrar</a></span>
                             <p-button [disabled]="disableStepEmpresa()" label="Continuar" icon="pi pi-arrow-right"
                                 iconPos="right" (onClick)="activateCallback(2)" />
                         </div>
                     </ng-template>
                 </p-step-panel>

                 <p-step-panel [value]="2">
                     <ng-template #content let-activateCallback="activateCallback">
                         <form [formGroup]="empresaForm" class="px-8">
                             <div class="grid grid-cols-12 gap-4">
                                 <div class="mb-6 col-span-12">
                                     <label for="tipoPropriedade" class="font-medium  mb-2 block">
                                         Tipo propetário
                                     </label>
                                     <p-select fluid formControlName="tipoPropriedade" [options]="tipoProriedadeOpts"
                                         optionLabel="name" placeholder="Selecione o tipo" [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('tipoPropriedade')?.touched &&
                                     empresaForm.get('tipoPropriedade')?.invalid) {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                             </div>

                             <div formArrayName="acionistas">
                                 @for (item of acionistasArray.controls; track $index; let i = $index) {
                                 @if (acionistasArray.length > 1) {
                                 <div class="text-2xl mt-6 mb-6">
                                     <span class="mr-6">{{ item.get('sectionTitle')?.value }}</span>
                                     <p-button size="small" severity="warn" pTooltip="Eliminar acionista"
                                         tooltipPosition="right" icon="pi pi-user-minus" iconPos="left" [rounded]="true"
                                         (onClick)="removeAcionistaForm($index)" />
                                 </div>
                                 }
                                 <div class="grid grid-cols-12 gap-4" [formGroupName]="$index">
                                     <div class="mb-6 col-span-12">
                                         <label for="nome" class="font-medium  mb-2 block">
                                             Nome do titular da empresa
                                         </label>
                                         <input formControlName="nome" id="nome" type="text" pInputText fluid />
                                         @if (item.get('nome')?.touched && item.get('nome')?.invalid) {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="acoes" class="font-medium  mb-2 block">
                                             Ações
                                         </label>
                                         <p-inputgroup>
                                             <p-inputgroup-addon>%</p-inputgroup-addon>
                                             <p-inputnumber formControlName="acoes" mode="decimal" [max]="100"
                                                 [minFractionDigits]="2" [maxFractionDigits]="2" />
                                         </p-inputgroup>
                                         @if (item.get('acoes')?.touched && item.get('acoes')?.invalid) {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="nif" class="font-medium  mb-2 block">
                                             NIF
                                         </label>
                                         <input formControlName="nif" id="nif" type="text" pInputText fluid />
                                         @if (item.get('nif')?.touched && item.get('nif')?.invalid) {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="tipoDocumento" class="font-medium  mb-2 block">
                                             Tipo Documento
                                         </label>
                                         <p-select fluid formControlName="tipoDocumento" [options]="tipoDocumentoOpts"
                                             optionLabel="name" placeholder="Selecione o tipo documento"
                                             [showClear]="true">
                                         </p-select>
                                         @if (item.get('tipoDocumento')?.touched && item.get('tipoDocumento')?.invalid)
                                         {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="numeroDocumento" class="font-medium  mb-2 block">
                                             Nº Documento
                                         </label>
                                         <input formControlName="numeroDocumento" id="numeroDocumento" type="text"
                                             pInputText fluid />
                                         @if (item.get('numeroDocumento')?.touched &&
                                         item.get('numeroDocumento')?.invalid)
                                         {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12">
                                         <label for="local" class="font-medium  mb-2 block">
                                             Endereço
                                         </label>
                                         <input formControlName="local" id="local" type="text" pInputText fluid
                                             placeholder="ex. Av. Pres. Nicolau Lobato" />
                                         @if (item.get('local')?.touched &&
                                         item.get('local')?.invalid)
                                         {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12">
                                         <div class="flex flex-col sm:flex-row sm:items-center gap-6">
                                             <div class="flex-auto">
                                                 <label for="aldeia" class="font-medium  mb-2 block">
                                                     Aldeia
                                                 </label>
                                                 <p-select fluid formControlName="aldeia"
                                                     [options]="listaAldeiaAcionista[i]" optionLabel="nome"
                                                     placeholder="Selecione a Aldeia" [filter]="true" filterBy="nome"
                                                     [showClear]="true" (onFilter)="aldeiaAcionistaFilter($event,i)"
                                                     (onpanelHide)="onPanelHideAcionista(i)"
                                                     (onChange)="aldeiaAcionistaOnChange($event, i)"
                                                     (onClear)="onPanelHideAcionista(i)">
                                                 </p-select>
                                                 @if (item.get('aldeia')?.touched &&
                                                 item.get('aldeia')?.invalid)
                                                 {
                                                 <p class="text-red-500 text-sm mt-1">
                                                     Este campo é obrigatório e deve ser válido.
                                                 </p>
                                                 }
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="suco" class="font-medium  mb-2 block">
                                                     Suco
                                                 </label>
                                                 <input formControlName="suco" id="suco" type="text" pInputText fluid />
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="posto" class="font-medium  mb-2 block">
                                                     Posto Administrativo
                                                 </label>
                                                 <input formControlName="postoAdministrativo" id="postoAdministrativo"
                                                     type="text" pInputText fluid />
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="municipio" class="font-medium  mb-2 block">
                                                     Municipio
                                                 </label>
                                                 <input formControlName="municipio" id="municipio" type="text"
                                                     pInputText fluid />
                                             </div>
                                         </div>
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="telefone" class="font-medium  mb-2 block">
                                             Nº Telefone
                                         </label>
                                         <input formControlName="telefone" id="telefone" type="tel" pInputText fluid />
                                         @if (item.get('telefone')?.touched &&
                                         item.get('telefone')?.invalid)
                                         {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="email" class="font-medium  mb-2 block">
                                             Email
                                         </label>
                                         <input formControlName="email" id="email" type="email" pInputText fluid />
                                         @if (item.get('email')?.touched &&
                                         item.get('email')?.invalid)
                                         {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="agregadoFamilia" class="font-medium  mb-2 block">
                                             Agregado Familia
                                         </label>
                                         <input formControlName="agregadoFamilia" id="agregadoFamilia" pInputText
                                             fluid />
                                         @if (item.get('agregadoFamilia')?.touched &&
                                         item.get('agregadoFamilia')?.invalid)
                                         {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                     <div class="mb-6 col-span-12 md:col-span-6">
                                         <label for="relacaoFamilia" class="font-medium  mb-2 block">
                                             Relação Família
                                         </label>
                                         <p-select fluid formControlName="relacaoFamilia"
                                             [options]="tipoRelacaoFamiliaOpts" optionLabel="name" optionValue="value"
                                             placeholder="Selecione o tipo" [showClear]="true">
                                         </p-select>
                                         @if (item.get('relacaoFamilia')?.touched &&
                                         item.get('relacaoFamilia')?.invalid)
                                         {
                                         <p class="text-red-500 text-sm mt-1">
                                             Este campo é obrigatório e deve ser válido.
                                         </p>
                                         }
                                     </div>
                                 </div>
                                 @if (acionistasArray.length > 1) {
                                 <p-divider />
                                 }
                                 }
                             </div>
                             @if(showAddBtnAcionistas) {
                             <p-button label="Adicionar acionista" icon="pi pi-user-plus" iconPos="left"
                                 (onClick)="addAcionistaForm()" />
                             }
                         </form>
                         <div class="flex pt-6 justify-between">
                             <p-button label="Back" severity="secondary" icon="pi pi-arrow-left" iconPos="left"
                                 (onClick)="activateCallback(1)" />
                             <p-button [disabled]="disableStepProprietario()" label="Continuar" icon="pi pi-arrow-right"
                                 iconPos="right" (onClick)="activateCallback(3)" />
                         </div>
                     </ng-template>
                 </p-step-panel>

                 <p-step-panel [value]="3">
                     <ng-template #content let-activateCallback="activateCallback">
                         <form [formGroup]="empresaForm" class="px-8">
                             <h1 class="text-2xl font-bold text-white">
                                 Gerente
                             </h1>
                             <div formGroupName="gerente" class="grid grid-cols-12 gap-4 py-4">

                                 <div class="mb-6 col-span-12">
                                     <label for="nome" class="font-medium  mb-2 block">
                                         Nome
                                     </label>
                                     <input formControlName="nome" id="nome" type="text" pInputText fluid
                                         placeholder="Ex: Joao da Silva" />
                                     @if (empresaForm.get('gerente.nome')?.touched &&
                                     empresaForm.get('gerente.nome')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="tipoDocumento" class="font-medium  mb-2 block">
                                         Tipo Documento
                                     </label>
                                     <p-select fluid formControlName="tipoDocumento" [options]="tipoDocumentoOpts"
                                         optionLabel="name" placeholder="Selecione o tipo documento" [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('gerente.tipoDocumento')?.touched &&
                                     empresaForm.get('gerente.tipoDocumento')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="numeroDocumento" class="font-medium  mb-2 block">
                                         Nº Documento
                                     </label>
                                     <input formControlName="numeroDocumento" id="numeroDocumento" type="text"
                                         pInputText fluid />
                                     @if (empresaForm.get('gerente.numeroDocumento')?.touched &&
                                     empresaForm.get('gerente.numeroDocumento')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="estadoCivil" class="font-medium  mb-2 block">
                                         Estado Civil
                                     </label>
                                     <p-select fluid formControlName="estadoCivil" [options]="tipoEstadoCivilOpts"
                                         optionLabel="name" optionValue="value" placeholder="Selecione o tipo documento"
                                         [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('gerente.estadoCivil')?.touched &&
                                     empresaForm.get('gerente.estadoCivil')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="email" class="font-medium  mb-2 block">
                                         Email
                                     </label>
                                     <input formControlName="email" id="email" type="email" pInputText fluid />
                                     @if (empresaForm.get('gerente.email')?.touched &&
                                     empresaForm.get('gerente.email')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="telefone" class="font-medium mb-2 block">
                                         Nº Telefone
                                     </label>
                                     <input formControlName="telefone" id="telefone" type="tel" pInputText fluid />
                                     @if (empresaForm.get('gerente.telefone')?.touched &&
                                     empresaForm.get('gerente.telefone')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="nacionalidade" class="font-medium  mb-2 block">
                                         Nacionalidade
                                     </label>
                                     <p-select fluid formControlName="nacionalidade" [options]="tipoNacionalidadeOpts"
                                         (onChange)="nacionalidadeOnChange($event, 'gerente')" optionLabel="name"
                                         optionValue="value" placeholder="Selecione a nacionalidade" [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('gerente.nacionalidade')?.touched &&
                                     empresaForm.get('gerente.nacionalidade')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 @if (gerenteForeigner) {
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="numeroVisto" class="font-medium  mb-2 block">
                                         Nº de Visto
                                     </label>
                                     <input formControlName="numeroVisto" id="numeroVisto" type="text" pInputText
                                         fluid />
                                     @if (empresaForm.get('gerente.numeroVisto')?.touched &&
                                     empresaForm.get('gerente.numeroVisto')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="validadeVisto" class="font-medium  mb-2 block">
                                         Data Validade de Visto
                                     </label>
                                     <p-datepicker formControlName="validadeVisto" id="validadeVisto" appendTo="body"
                                         [showButtonBar]="true" fluid />
                                     @if (empresaForm.get('gerente.validadeVisto')?.touched &&
                                     empresaForm.get('gerente.validadeVisto')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 }
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="naturalidade" class="font-medium  mb-2 block">
                                         Naturalidade
                                     </label>
                                     <input formControlName="naturalidade" id="naturalidade" type="text" pInputText
                                         fluid />
                                     @if (empresaForm.get('gerente.naturalidade')?.touched &&
                                     empresaForm.get('gerente.naturalidade')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12">
                                     <div formGroupName="morada" class="flex flex-col gap-6 w-full sm:w-auto mb-6">
                                         <div class="mb-6 col-span-12">
                                             <label for="local" class="font-medium  mb-2 block">
                                                 Morada
                                             </label>
                                             <input formControlName="local" id="local" type="text" pInputText fluid
                                                 placeholder="ex. Av. Pres. Nicolau Lobato" />
                                             @if (empresaForm.get('gerente.morada.local')?.touched &&
                                             empresaForm.get('gerente.morada.local')?.invalid)
                                             {
                                             <p class="text-red-500 text-sm mt-1">
                                                 Este campo é obrigatório e deve ser válido.
                                             </p>
                                             }
                                         </div>
                                         <div class="flex flex-col sm:flex-row sm:items-center gap-6">
                                             <div class="flex-auto">
                                                 <label for="aldeia" class="font-medium  mb-2 block">
                                                     Aldeia
                                                 </label>
                                                 <p-select fluid formControlName="aldeia" [options]="aldeias"
                                                     optionLabel="nome" placeholder="Selecione a Aldeia" [filter]="true"
                                                     filterBy="nome" [showClear]="true"
                                                     (onChange)="gerenteRepresentanteAldeiaOnChange($event, 'gerente')"
                                                     (onFilter)="gerenteRepresentanteAldeiaFilter($event, 'gerente')"
                                                     (onpanelHide)="gerenteRepresentanteOnPanelHide('gerente')"
                                                     (onClear)="gerenteRepresentanteOnPanelHide('gerente')">
                                                 </p-select>
                                                 @if (empresaForm.get('gerente.morada.aldeia')?.touched &&
                                                 empresaForm.get('gerente.morada.aldeia')?.invalid)
                                                 {
                                                 <p class="text-red-500 text-sm mt-1">
                                                     Este campo é obrigatório e deve ser válido.
                                                 </p>
                                                 }
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="suco" class="font-medium  mb-2 block">
                                                     Suco
                                                 </label>
                                                 <input formControlName="suco" id="suco" type="text" pInputText fluid />
                                             </div>

                                             <div class="flex-auto">
                                                 <label for="posto" class="font-medium  mb-2 block">
                                                     Posto Administrativo
                                                 </label>
                                                 <input formControlName="postoAdministrativo" id="postoAdministrativo"
                                                     type="text" pInputText fluid />
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="municipio" class="font-medium  mb-2 block">
                                                     Municipio
                                                 </label>
                                                 <input formControlName="municipio" id="municipio" type="text"
                                                     pInputText fluid />
                                             </div>

                                         </div>
                                     </div>
                                 </div>
                             </div>
                             <h1 class="text-2xl font-bold text-white">
                                 Representante
                             </h1>
                             <div formGroupName="representante" class="grid grid-cols-12 gap-4 pt-4">
                                 <div class="mb-6 col-span-12">
                                     <label for="tipo" class="font-medium  mb-2 block">
                                         Tipo
                                     </label>
                                     <p-select (onChange)="onRepresentanteTipoChange($event)" fluid
                                         formControlName="tipo" [options]="tipoRepresentanteOptions" optionLabel="name"
                                         [showClear]="true" optionValue="value"
                                         placeholder="Selecione o tipo de Representante">
                                     </p-select>
                                     @if (empresaForm.get('representante.tipo')?.touched &&
                                     empresaForm.get('representante.tipo')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>

                                 @if (empresaForm.get('representante.tipo')?.value) {

                                 @if (empresaForm.get('representante.tipo')?.value === 'Empresa') {
                                 <div class="mb-6 col-span-12">
                                     <label for="nomeEmpresa" class="font-medium  mb-2 block">
                                         Nome da Empresa
                                     </label>
                                     <input formControlName="nomeEmpresa" id="nomeEmpresa" type="text" pInputText fluid
                                         placeholder="Ex. Empresa Unip. lda" />
                                     @if (empresaForm.get('representante.nomeEmpresa')?.touched &&
                                     empresaForm.get('representante.nomeEmpresa')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 }

                                 <div class="mb-6 col-span-12">
                                     <label for="nome" class="font-medium  mb-2 block">
                                         @if (empresaForm.get('representante.tipo')?.value === 'Empresa'){
                                         Nome do funcionário
                                         }@else {
                                         Nome do Individual
                                         }
                                     </label>
                                     <input formControlName="nome" id="nome" type="text" pInputText fluid
                                         placeholder="Ex: Joao da Silva" />
                                     @if (empresaForm.get('representante.nome')?.touched &&
                                     empresaForm.get('representante.nome')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>

                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="tipoDocumento" class="font-medium  mb-2 block">
                                         Tipo Documento
                                     </label>
                                     <p-select fluid formControlName="tipoDocumento" [options]="tipoDocumentoOpts"
                                         optionLabel="name" placeholder="Selecione o tipo documento" [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('representante.tipoDocumento')?.touched &&
                                     empresaForm.get('representante.tipoDocumento')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="numeroDocumento" class="font-medium  mb-2 block">
                                         Nº Documento
                                     </label>
                                     <input formControlName="numeroDocumento" id="numeroDocumento" type="text"
                                         pInputText fluid />
                                     @if (empresaForm.get('representante.numeroDocumento')?.touched &&
                                     empresaForm.get('representante.numeroDocumento')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="dataNascimento" class="font-medium  mb-2 block">
                                         Data Nascimento
                                     </label>
                                     <p-datepicker formControlName="dataNascimento" id="dataNascimento" appendTo="body"
                                         [showButtonBar]="true" fluid />
                                     @if (empresaForm.get('representante.dataNascimento')?.touched &&
                                     empresaForm.get('representante.dataNascimento')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="estadoCivil" class="font-medium  mb-2 block">
                                         Estado Civil
                                     </label>
                                     <p-select fluid formControlName="estadoCivil" [options]="tipoEstadoCivilOpts"
                                         optionLabel="name" optionValue="value" placeholder="Selecione o tipo documento"
                                         [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('representante.estadoCivil')?.touched &&
                                     empresaForm.get('representante.estadoCivil')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="nacionalidade" class="font-medium  mb-2 block">
                                         Nacionalidade
                                     </label>
                                     <p-select fluid formControlName="nacionalidade" [options]="tipoNacionalidadeOpts"
                                         (onChange)="nacionalidadeOnChange($event, 'representante')" optionLabel="name"
                                         optionValue="value" placeholder="Selecione a nacionalidade" [showClear]="true">
                                     </p-select>
                                     @if (empresaForm.get('representante.nacionalidade')?.touched &&
                                     empresaForm.get('representante.nacionalidade')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 @if (representanteForeigner) {
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="numeroVisto" class="font-medium  mb-2 block">
                                         Nº de Visto
                                     </label>
                                     <input formControlName="numeroVisto" id="numeroVisto" type="text" pInputText
                                         fluid />
                                     @if (empresaForm.get('representante.numeroVisto')?.touched &&
                                     empresaForm.get('representante.numeroVisto')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="validadeVisto" class="font-medium  mb-2 block">
                                         Data Validade de Visto
                                     </label>
                                     <p-datepicker formControlName="validadeVisto" id="validadeVisto" appendTo="body"
                                         [showButtonBar]="true" fluid />
                                     @if (empresaForm.get('representante.validadeVisto')?.touched &&
                                     empresaForm.get('representante.validadeVisto')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 }
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="naturalidade" class="font-medium  mb-2 block">
                                         Naturalidade
                                     </label>
                                     <input formControlName="naturalidade" id="naturalidade" type="text" pInputText
                                         fluid />
                                     @if (empresaForm.get('representante.naturalidade')?.touched &&
                                     empresaForm.get('representante.naturalidade')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="pai" class="font-medium  mb-2 block">
                                         Pai
                                     </label>
                                     <input formControlName="pai" id="pai" pInputText fluid />
                                     @if (empresaForm.get('representante.pai')?.touched &&
                                     empresaForm.get('representante.naturalidade')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="mae" class="font-medium  mb-2 block">
                                         Mãe
                                     </label>
                                     <input formControlName="mae" id="mae" pInputText fluid />
                                     @if (empresaForm.get('representante.mae')?.touched &&
                                     empresaForm.get('representante.mae')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12">
                                     <div formGroupName="morada" class="flex flex-col gap-6 w-full sm:w-auto mb-6">
                                         <div class="mb-6 col-span-12">
                                             <label for="local" class="font-medium  mb-2 block">
                                                 Morada
                                             </label>
                                             <input formControlName="local" id="local" type="text" pInputText fluid
                                                 placeholder="ex. Av. Pres. Nicolau Lobato" />
                                             @if (empresaForm.get('representante.morada.local')?.touched &&
                                             empresaForm.get('representante.morada.local')?.invalid)
                                             {
                                             <p class="text-red-500 text-sm mt-1">
                                                 Este campo é obrigatório e deve ser válido.
                                             </p>
                                             }
                                         </div>
                                         <div class="flex flex-col sm:flex-row sm:items-center gap-6">
                                             <div class="flex-auto">
                                                 <label for="aldeia" class="font-medium  mb-2 block">
                                                     Aldeia
                                                 </label>
                                                 <p-select fluid formControlName="aldeia" [options]="aldeias"
                                                     optionLabel="nome" placeholder="Selecione a Aldeia" [filter]="true"
                                                     filterBy="nome" [showClear]="true"
                                                     (onChange)="gerenteRepresentanteAldeiaOnChange($event, 'representante')"
                                                     (onFilter)="gerenteRepresentanteAldeiaFilter($event, 'representante')"
                                                     (onpanelHide)="gerenteRepresentanteOnPanelHide('representante')"
                                                     (onClear)="gerenteRepresentanteOnPanelHide('representante')">
                                                 </p-select>
                                                 @if (empresaForm.get('representante.morada.aldeia')?.touched &&
                                                 empresaForm.get('representante.morada.aldeia')?.invalid)
                                                 {
                                                 <p class="text-red-500 text-sm mt-1">
                                                     Este campo é obrigatório e deve ser válido.
                                                 </p>
                                                 }
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="suco" class="font-medium  mb-2 block">
                                                     Suco
                                                 </label>
                                                 <input formControlName="suco" id="suco" type="text" pInputText fluid />
                                             </div>

                                             <div class="flex-auto">
                                                 <label for="posto" class="font-medium  mb-2 block">
                                                     Posto Administrativo
                                                 </label>
                                                 <input formControlName="postoAdministrativo" id="postoAdministrativo"
                                                     type="text" pInputText fluid />
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="municipio" class="font-medium  mb-2 block">
                                                     Municipio
                                                 </label>
                                                 <input formControlName="municipio" id="municipio" type="text"
                                                     pInputText fluid />
                                             </div>

                                         </div>
                                     </div>
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="email" class="font-medium  mb-2 block">
                                         Email
                                     </label>
                                     <input formControlName="email" id="email" type="email" pInputText fluid />
                                     @if (empresaForm.get('representante.email')?.touched &&
                                     empresaForm.get('representante.email')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="telefone" class="font-medium mb-2 block">
                                         Nº Telefone
                                     </label>
                                     <input formControlName="telefone" id="telefone" type="tel" pInputText fluid />
                                     @if (empresaForm.get('representante.telefone')?.touched &&
                                     empresaForm.get('representante.telefone')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                                 }
                             </div>
                             <div class="mt-6 mb-6 text-left flex justify-between">
                                 <p-button label="Back" severity="secondary" icon="pi pi-arrow-left" iconPos="left"
                                     (onClick)="activateCallback(2)" />
                                 <p-button [disabled]="disableStepGerente()" label="Continuar" icon="pi pi-arrow-right"
                                     iconPos="right" (onClick)="activateCallback(4)" />
                             </div>
                         </form>
                     </ng-template>
                 </p-step-panel>

                 <p-step-panel [value]="4">
                     <ng-template #content let-activateCallback="activateCallback">
                         <form [formGroup]="empresaForm" class="px-8">
                             <div formGroupName="utilizador" class="grid grid-cols-12 gap-4">
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="email" class="font-medium  mb-2 block">
                                         Email
                                     </label>
                                     <input formControlName="email" id="email" type="email" pInputText fluid />
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="password" class="font-medium  mb-2 block">
                                         Palavra-passe
                                     </label>
                                     <p-password formControlName="password" fluid [feedback]="true"
                                         [toggleMask]="true" />
                                     @if (empresaForm.get('utilizador.password')?.touched &&
                                     empresaForm.get('utilizador.password')?.invalid)
                                     {
                                     <p class="text-red-500 text-sm mt-1">
                                         Este campo é obrigatório e deve ser válido.
                                     </p>
                                     }
                                 </div>
                             </div>
                             <div class="mt-6 mb-6 text-left flex justify-between">
                                 <p-button label="Back" severity="secondary" icon="pi pi-arrow-left" iconPos="left"
                                     (onClick)="activateCallback(3)" />
                                 <p-button [disabled]="disableStepConta()" label="Continuar" icon="pi pi-arrow-right"
                                     iconPos="right" (onClick)="activateCallback(5)" />
                             </div>
                         </form>
                     </ng-template>
                 </p-step-panel>

                 <p-step-panel [value]="5">
                     <ng-template #content let-activateCallback="activateCallback">

                         <div class="text-white">
                             <div class="max-w-4xl mx-auto p-8">
                                 <header class="flex items-center justify-between mb-10">
                                     <!-- <h1 class="text-3xl font-bold text-gray-100">Resumo da Inscrição</h1> -->
                                     <div class="flex flex-row gap-2">
                                         <h1 class="text-3xl font-bold text-gray-100">Resumo da Inscrição</h1>
                                         <p-button icon="pi pi-file-pdf" size="large" severity="info" [raised]="true"
                                             printSectionId="myDiv" [useExistingCss]="true" ngxPrint />
                                     </div>
                                     <p-button icon="pi pi-save" (click)="submit(empresaForm)" [loading]="loading"
                                         [disabled]="!empresaForm.valid" pButton pRipple label="Confirmar e Guardar"
                                         class="w-auto"></p-button>
                                 </header>
                                 <main id="myDiv">
                                     <section class="bg-gray-800 p-8 rounded-2xl shadow-lg mb-8">
                                         <div class="flex items-center mb-6">
                                             <i class="bi bi-buildings mr-4" style="font-size: 2rem"></i>
                                             <h2 class="text-2xl font-semibold text-gray-200">Dados da Empresa</h2>
                                         </div>
                                         <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                                             <div>
                                                 <p class="text-sm text-gray-400">Nome da Empresa:</p>
                                                 <p class="text-lg text-gray-100">{{ empresaForm.get('nome')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">NIF:</p>
                                                 <p class="text-lg text-gray-100">{{ empresaForm.get('nif')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Telefone:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('telefone')?.value }}</p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Capital Social:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('capitalSocial')?.value }}</p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Data de Registo:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('dataRegisto')?.value | date: 'dd MMMM yyyy' :'':'pt'}}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Total Trabalhadores:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('totalTrabalhadores')?.value }}</p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Volume de Negócios Anual:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('volumeNegocioAnual')?.value }}</p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Balanço total Anual:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('balancoTotalAnual')?.value }}</p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Tipo de Propriedade:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('tipoPropriedade')?.value.name }}</p>
                                             </div>
                                             <div class="md:col-span-2">
                                                 <p class="text-sm text-gray-400">Localização:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('sede.local')?.value }} <br>
                                                     {{ empresaForm.get('sede.aldeia')?.value.nome }},
                                                     {{ empresaForm.get('sede.suco')?.value }},
                                                     {{ empresaForm.get('sede.postoAdministrativo')?.value }},
                                                     {{ empresaForm.get('sede.municipio')?.value }}
                                                 </p>
                                             </div>
                                         </div>
                                     </section>
                                     <section class="bg-gray-800 p-8 rounded-2xl shadow-lg">
                                         <div class="flex items-center mb-6">
                                             <i class="pi pi-users  mr-4" style="font-size: 2rem"></i>
                                             <h2 class="text-2xl font-semibold text-gray-200">Acionistas</h2>
                                         </div>
                                         <div>
                                             @for (a of empresaForm.get('acionistas')?.getRawValue(); track $index) {
                                             <h3 class="text-xl font-medium text-gray-300 mb-4">
                                                 Acionista&nbsp;{{ $index + 1 }}
                                             </h3>
                                             <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 mb-6 ml-4">
                                                 <div>
                                                     <p class="text-sm text-gray-400">Nome:</p>
                                                     <p class="text-lg text-gray-100">{{ a.nome }}</p>
                                                 </div>
                                                 <div>
                                                     <p class="text-sm text-gray-400">NIF:</p>
                                                     <p class="text-lg text-gray-100">{{ a.nif }}</p>
                                                 </div>
                                                 <div>
                                                     <p class="text-sm text-gray-400">Documento:</p>
                                                     <p class="text-lg text-gray-100">{{ a.tipoDocumento.name }} –
                                                         {{ a.numeroDocumento }}
                                                     </p>
                                                 </div>
                                                 <div>
                                                     <p class="text-sm text-gray-400">Contacto:</p>
                                                     <p class="text-lg text-gray-100">{{ a.telefone }} / {{ a.email }}
                                                     </p>
                                                 </div>
                                                 <div>
                                                     <p class="text-sm text-gray-400">Agregado Familia:</p>
                                                     <p class="text-lg text-gray-100">
                                                         {{ a.agregadoFamilia }}
                                                     </p>
                                                 </div>
                                                 <div>
                                                     <p class="text-sm text-gray-400">Relação Familia:</p>
                                                     <p class="text-lg text-gray-100">
                                                         {{ a.relacaoFamilia }}
                                                     </p>
                                                 </div>
                                                 <div>
                                                     <p class="text-sm text-gray-400">Ações:</p>
                                                     <p class="text-lg text-gray-100">{{ a.acoes }}</p>
                                                 </div>
                                                 <div class="md:col-span-2">
                                                     <p class="text-sm text-gray-400">Endereco:</p>
                                                     <p class="text-lg text-gray-100">
                                                         {{ a.local }},
                                                         {{ a.aldeia.nome }},
                                                         {{ a.suco }},
                                                         {{ a.postoAdministrativo }},
                                                         {{ a.municipio }}
                                                     </p>
                                                 </div>
                                             </div>
                                             }
                                         </div>
                                     </section>
                                     <section class="bg-gray-800 p-8 rounded-2xl shadow-lg mt-4 mb-8">
                                         <div class="flex items-center mb-6">
                                             <i class="bi bi-person-gear text-4xl mr-3"></i>
                                             <h2 class="text-2xl font-semibold text-gray-200">Gerente
                                             </h2>
                                         </div>
                                         <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                                             <div>
                                                 <p class="text-sm text-gray-400">Nome:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('gerente.nome')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Email:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('gerente.email')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Documento:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('gerente.tipoDocumento')?.value.name }} -
                                                     {{ empresaForm.get('gerente.numeroDocumento')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Telemovel:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('gerente.email')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Morada:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('gerente.morada.local')?.value }} <br>
                                                     {{ empresaForm.get('gerente.morada.aldeia')?.value.nome }},
                                                     {{ empresaForm.get('gerente.morada.suco')?.value }},
                                                     {{ empresaForm.get('gerente.morada.postoAdministrativo')?.value }},
                                                     {{ empresaForm.get('gerente.morada.municipio')?.value }}
                                                 </p>
                                             </div>
                                         </div>
                                     </section>
                                     <section class="bg-gray-800 p-8 rounded-2xl shadow-lg mt-4 mb-8">
                                         <div class="flex items-center mb-6">
                                             <!-- <i class="bi bi-person-vcard mr-4" style="font-size: 2rem"></i> -->
                                             <i class="bi bi-person-badge text-4xl mr-3"></i>
                                             <h2 class="text-2xl font-semibold text-gray-200">Representante
                                             </h2>
                                         </div>
                                         <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                                             <div>
                                                 <p class="text-sm text-gray-400">Nome:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.nome')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Tipo:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.tipo')?.value }}
                                                 </p>
                                             </div>

                                             <div>
                                                 <p class="text-sm text-gray-400">Documento:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.tipoDocumento')?.value.name }} -
                                                     {{ empresaForm.get('representante.numeroDocumento')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Data Nascimento:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.dataNascimento')?.value | date: 'dd MMM yyyy' }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Morada:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.morada.local')?.value }} <br>
                                                     {{ empresaForm.get('representante.morada.aldeia')?.value.nome }},
                                                     {{ empresaForm.get('representante.morada.suco')?.value }},
                                                     {{ empresaForm.get('representante.morada.postoAdministrativo')?.value }},
                                                     {{ empresaForm.get('representante.morada.municipio')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Estado Civil:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.estadoCivil')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Pai:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.pai')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Mãe:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.mae')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Nacionalidade:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.nacionalidade')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Naturalidade:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.naturalidade')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Email:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.email')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Telemovel:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('representante.telefone')?.value }}
                                                 </p>
                                             </div>
                                         </div>
                                     </section>
                                     <section class="bg-gray-800 p-8 rounded-2xl shadow-lg mt-4 mb-8">
                                         <div class="flex items-center mb-6">
                                             <i class="bi bi-person-vcard mr-4" style="font-size: 2rem"></i>
                                             <h2 class="text-2xl font-semibold text-gray-200">Conta de acesso
                                             </h2>
                                         </div>
                                         <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                                             <div>
                                                 <p class="text-sm text-gray-400">Email:</p>
                                                 <p class="text-lg text-gray-100">
                                                     {{ empresaForm.get('utilizador.email')?.value }}
                                                 </p>
                                             </div>
                                             <div>
                                                 <p class="text-sm text-gray-400">Senha:</p>
                                                 <p class="text-lg text-gray-100">
                                                     ********
                                                 </p>
                                             </div>
                                         </div>
                                     </section>
                                 </main>
                                 <div class="mt-6 mb-6 text-left flex justify-between items-center">
                                     <p-button label="Back" severity="secondary" icon="pi pi-arrow-left" iconPos="left"
                                         (onClick)="activateCallback(2)" />
                                     <p-button icon="pi pi-save" (click)="submit(empresaForm)" [loading]="loading"
                                         [disabled]="!empresaForm.valid" pButton pRipple label="Confirmar e Guardar"
                                         class="w-auto"></p-button>
                                 </div>
                             </div>

                         </div>
                     </ng-template>
                 </p-step-panel>
             </p-step-panels>
         </p-stepper>
         <div class="px-12">
             @if (isError) {
             <div class="mb-4">
                 <p-message severity="error">
                     <ng-template #icon>
                         <i class="bi bi-x-circle" style="font-size: 1.5rem"></i> &nbsp;
                     </ng-template>
                     <span class="ml-2 text-lg">
                         {{ errorMessage }}
                     </span>
                 </p-message>
             </div>
             }
             <!-- <div class="flex items-center my-6">
                 <div class="flex items-center pr-6 mr-6 border-r border-surface-200 dark:border-surface-700">
                     <h4>
                         Ministério de Comércio e Indústria
                     </h4>
                 </div>
                 <span class="text-sm text-surface-500 dark:text-surface-400 mr-4">Copyright 2025</span>
             </div> -->
         </div>
     </div>
 </div>
 } @else {
 <div class="w-full" style="background: var(--surface-ground)">
     <p-fluid
         class="min-h-screen text-center w-full flex items-center md:items-start justify-start flex-col bg-auto md:bg-contain !bg-no-repeat"
         style="padding: 10% 10% 20% 10%; background: var(--exception-pages-image); background-size: contain;">
         <div class="flex flex-col">
             <div class="flex items-center justify-center">
                 <img src="/images/logo.png" style="width: 100px" alt="logo" />
             </div>
             <div class="mt-2 mb-8">
                 <p class="text-xl">
                     Trade License Management System
                 </p>
             </div>
             @if (notification) {
             <p-message [severity]="notification.state">
                 <ng-template #icon>
                     <i [class]="notification.icon" style="font-size: 1.5rem"></i> &nbsp;
                 </ng-template>
                 <span class="ml-2 text-lg">
                     {{ notification.message }}
                 </span>
             </p-message>
             }
             <div class="mt-6 text-center flex items-center justify-center flex-col gap-4">
                 <p-button icon="pi pi-send" (click)="submit(empresaForm)" [loading]="loading"
                     [disabled]="empresaForm.valid" pButton label="Reenviar email">
                 </p-button>
                 <p-button icon="pi pi-sign-in" pButton label="Logar" styleClass="max-width:200px"
                     routerLink="/auth/login" [rounded]="true" [outlined]="true">
                 </p-button>
             </div>

         </div>

         <div class="flex items-center absolute" style="bottom: 75px">
             <div class="flex items-center pr-6 mr-6 border-r border-surface-200 dark:border-surface-700">
                 <h4>
                     Ministério de Comércio e Indústria
                 </h4>
             </div>
             <span class="text-sm text-surface-500 dark:text-surface-400 mr-4">Copyright 2025</span>
         </div>
     </p-fluid>
 </div>
 }