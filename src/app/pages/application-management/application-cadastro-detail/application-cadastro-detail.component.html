 <p-toast position="bottom-center" />
 <div class="card">
     <span class="text-2xl font-bold mb-6 block">
         Candidatura para o Pedido Inscricacao no Cadastro {{categoria | titlecase}}
     </span>

     <p-stepper [value]="1" class="basis-[50rem]" [linear]="!(pedidoId)">
         <p-step-list>
             <p-step [value]="1">Detalho da Aplicação</p-step>
             @if (isSubmitted(aplicanteData)) {
             <p-step [value]="2">Pedido</p-step>
             <p-step [value]="3">Fatura-Recibo</p-step>
             }
         </p-step-list>
         <p-step-panels>
             <p-step-panel [value]="1">
                 <ng-template #content let-activateCallback="activateCallback">
                     <div class="px-8 font-sans">
                         <div class="grid grid-cols-4 md:grid-cols-5 gap-6 mb-8">
                             <div class="col-span-4 md:col-span-3 bg-[#26262B] p-6 rounded-lg">
                                 <h2 class="text-xl font-semibold text-white mb-4">Detalhes do Aplicante</h2>
                                 <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 text-gray-300">
                                     <div>
                                         <p class="font-medium text-gray-400">Nº do Aplicante:</p>
                                         <p class="text-lg">
                                             {{aplicanteData.numero}}
                                         </p>
                                     </div>
                                     <div>
                                         <p class="font-medium text-gray-400">Estado:</p>
                                         <p-tag [value]="aplicanteEstado"
                                             [severity]="aplicanteEstado| statusSeverity" />
                                     </div>
                                     <div>
                                         <p class="font-medium text-gray-400">
                                             Criado Em:
                                         </p>
                                         <p>
                                             {{aplicanteData.createdAt | date:'dd MMMM yyyy, HH:mm:ss':'':'pt'}}
                                         </p>
                                     </div>
                                     <div>
                                         <p class="font-medium text-gray-400">Atualizado Em:</p>
                                         <p>
                                             {{aplicanteData.updatedAt | date:'dd MMMM yyyy, HH:mm:ss':'':'pt'}}
                                         </p>
                                     </div>
                                 </div>
                             </div>
                             <div
                                 class="col-span-4 md:col-span-2 bg-[#26262B] p-6 rounded-lg flex flex-col justify-center">
                                 <h2 class="text-xl font-semibold text-white mb-4">Informação da Empresa</h2>
                                 <div class="space-y-2 text-gray-300">
                                     <p>
                                         <span class="font-medium text-gray-400">Nome:</span>
                                         {{aplicanteData.empresa.nome}}
                                     </p>
                                     <p>
                                         <span class="font-medium text-gray-400">NIF:</span>
                                         {{aplicanteData.empresa.nif}}
                                     </p>
                                     <p>
                                         <span class="font-medium text-gray-400">Telefone/Telemovel:</span>
                                         {{aplicanteData.empresa.telefone}} / {{aplicanteData.empresa.telemovel}}
                                     </p>
                                     <p>
                                         <span class="font-medium text-gray-400">Sede:</span>
                                         {{aplicanteData.empresa.sede.local}} -
                                         {{aplicanteData.empresa.sede.aldeia.nome}},
                                         {{aplicanteData.empresa.sede.aldeia.suco.nome}},
                                         {{aplicanteData.empresa.sede.aldeia.suco.postoAdministrativo.nome}},
                                         {{aplicanteData.empresa.sede.aldeia.suco.postoAdministrativo.municipio.nome}}
                                     </p>
                                 </div>
                             </div>
                         </div>
                         @if(aplicanteEstado == 'REJEITADO') {
                         <div class="bg-[#26262B] p-6 rounded-lg mb-8 reason-for-rejection" id="rejectionSection">
                             <h2 class="text-xl font-semibold text-white mb-4">
                                 Motivo de Rejeição
                             </h2>
                             <div class="bg-[#3A3A41] p-4 rounded-lg">
                                 <p class="text-gray-300">
                                     {{motivoRejeicao}}
                                 </p>
                             </div>
                         </div>
                         }

                         <div class="bg-[#26262B] p-6 rounded-lg mb-8">
                             <h2 class="text-xl font-semibold text-white mb-6">
                                 Etapas do Aplicante
                             </h2>
                             <div class="space-y-6">
                                 <div
                                     class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-[#3A3A41] rounded-lg">
                                     <div class="flex items-center mb-4 sm:mb-0">
                                         <div
                                             class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-500 text-white mr-4">
                                             <i class="bi bi-file-text text-2xl"></i>
                                         </div>
                                         <div>
                                             <h3 class="text-lg font-semibold text-white">
                                                 Formulário do Pedido Inscrição do Cadastro
                                             </h3>
                                             <p class="text-sm text-gray-400">
                                                 Detalhes do Pedido Inscrição do Cadastro
                                             </p>
                                         </div>
                                     </div>
                                     <div class="flex items-center space-x-4">
                                         @if (aplicanteData.pedidoInscricaoCadastro) {
                                         <p-tag [value]="aplicanteData.pedidoInscricaoCadastro.status"
                                             [severity]="aplicanteData.pedidoInscricaoCadastro.status| statusSeverity" />
                                         <p-button [routerLink]="['pedido-inscricao']" icon="pi pi-eye"
                                             label="Pré-visualização" [raised]="true" severity="info" />
                                         }
                                         @else {
                                         <p-tag value="Em curso" [severity]="'info'" icon="pi pi-clock" />
                                         }

                                     </div>
                                 </div>
                                 <div
                                     class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-[#3A3A41] rounded-lg">
                                     <div class="flex items-center mb-4 sm:mb-0">
                                         <div
                                             class="flex items-center justify-center h-12 w-12 rounded-full bg-green-500 text-white mr-4">
                                             <i class="bi bi-credit-card text-2xl"></i>
                                         </div>
                                         <div>
                                             <h3 class="text-lg font-semibold text-white">
                                                 Fatura
                                             </h3>
                                             <p class="text-sm text-gray-400">Informação da Fatura</p>
                                         </div>
                                     </div>
                                     <div class="flex items-center space-x-4">
                                         @if (aplicanteData.pedidoInscricaoCadastro &&
                                         aplicanteData.pedidoInscricaoCadastro.fatura) {
                                         <p-tag [value]="aplicanteData.pedidoInscricaoCadastro.fatura.status"
                                             [severity]="aplicanteData.pedidoInscricaoCadastro.fatura.status| statusSeverity" />
                                         <p-button [routerLink]="['fatura-inscricao']" icon="pi pi-eye"
                                             label="Pré-visualização" [raised]="true" severity="info" />
                                         }@else {
                                         <p-tag value="Não Emitida" [severity]="'secondary'" icon="pi pi-ban" />
                                         }

                                     </div>
                                 </div>
                                 <div
                                     class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-[#3A3A41] rounded-lg">
                                     <div class="flex items-center mb-4 sm:mb-0">
                                         <div
                                             class="flex items-center justify-center h-12 w-12 rounded-full bg-zinc-500 text-white mr-4">
                                             <i class="bi bi-receipt text-2xl"></i>
                                         </div>
                                         <div>
                                             <h3 class="text-lg font-semibold text-white">
                                                 Recibo
                                             </h3>
                                             <p class="text-sm text-gray-400">Informação do Recibo</p>
                                         </div>
                                     </div>
                                     <div class="flex items-center space-x-4">
                                         @if (aplicanteData.pedidoInscricaoCadastro
                                         && aplicanteData.pedidoInscricaoCadastro.fatura
                                         && aplicanteData.pedidoInscricaoCadastro.fatura.recibo
                                         ){
                                         <p-tag [value]="'SUBMETIDO'" [severity]="'success'" />
                                         <p-button (click)="downloadFile(uploadedFiles[0])" icon="pi pi-download"
                                             label="Decarregar Recibo" [raised]="true" [loading]="downloadLoading"
                                             severity="info" />
                                         }@else {
                                         <p-tag value="Não Submetida" [severity]="'secondary'" icon="pi pi-ban" />
                                         }

                                     </div>
                                 </div>
                                 <div
                                     class="flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 bg-[#3A3A41] rounded-lg">
                                     <div class="flex items-center mb-4 sm:mb-0">
                                         <div
                                             class="flex items-center justify-center h-12 w-12 rounded-full bg-purple-500 text-white mr-4">
                                             <i class="bi bi-award text-2xl"></i>
                                         </div>
                                         <div>
                                             <h3 class="text-lg font-semibold text-white">Certificado</h3>
                                             <p class="text-sm text-gray-400">Certificado oficial de registo
                                                 {{aplicanteData.categoria |titlecase}}.</p>
                                         </div>
                                     </div>
                                     <div class="flex items-center space-x-4">
                                         @if (aplicanteData.pedidoInscricaoCadastro &&
                                         aplicanteData.pedidoInscricaoCadastro.certificadoInscricaoCadastro) {
                                         <p-tag [value]="'EMITIDO'" [severity]="'success'" />
                                         <p-button
                                             [routerLink]="['certificado-inscricao/' + aplicanteData.pedidoInscricaoCadastro.certificadoInscricaoCadastro.id]"
                                             icon="pi pi-eye" label="Pré-visualização" [raised]="true"
                                             severity="info" />
                                         }@else {
                                         <p-tag value="Nao Emitido" [severity]="'warn'" icon="pi pi-times" />
                                         }

                                     </div>
                                 </div>
                             </div>
                         </div>

                     </div>
                     @if (isSubmitted(aplicanteData)) {
                     <div class="flex pt-6 justify-end">
                         <p-button label="Continuar" icon="pi pi-arrow-right" iconPos="right"
                             (onClick)="activateCallback(2)" />
                     </div>
                     }
                 </ng-template>
             </p-step-panel>

             <!-- Pedido Inscricao Cadastro -->
             <p-step-panel [value]="2">
                 <ng-template #content let-activateCallback="activateCallback">

                     <form [formGroup]="requestForm">
                         <span class="text-xl font-bold mt-6 mb-3 block">
                             PEDIDO
                         </span>
                         <div class="grid grid-cols-12 gap-4">
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="tipoPedidoCadastro"
                                     class="font-medium  mb-2 block">
                                     Tipo
                                 </label>
                                 <p-select formControlName="tipoPedidoCadastro" inputId="tipoPedidoCadastro"
                                     (onChange)="pedidoCadstroOnChange($event)" [options]="tipoPedidoOpts"
                                     optionLabel="name" fluid filterBy="name" [showClear]="true"
                                     placeholder="Selecione o tipo">
                                 </p-select>
                             </div>
                         </div>
                         <span class="text-xl font-bold mt-6 mb-3 block">
                             IDENTIFICACAO DO ESTABELECIMENTO
                         </span>
                         <div class="grid grid-cols-12 gap-4">
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="nomeEstabelecimento"
                                     class="font-medium  mb-2 block">
                                     Nome do Estabelecimento
                                 </label>
                                 <input formControlName="nomeEstabelecimento" id="nomeEstabelecimento" type="text"
                                     pInputText fluid />
                             </div>
                             <div class="mb-6 col-span-12">
                                 <div formGroupName="localEstabelecimento" class="grid grid-cols-12">
                                     <div class="mb-6 col-span-12">
                                         <label for="local"
                                             class="font-medium  mb-2 block">
                                             Local do Estabelecimento
                                         </label>
                                         <input formControlName="local" id="local" type="text" pInputText fluid
                                             placeholder="ex. Av. Pres. Nicolau Lobato" />
                                     </div>
                                     <div class="mb-6 col-span-12">
                                         <div class="flex flex-col sm:flex-row sm:items-center gap-6">
                                             <div class="flex-auto">
                                                 <label for="aldeia"
                                                     class="font-medium  mb-2 block">
                                                     Aldeia
                                                 </label>
                                                 <p-select fluid formControlName="aldeia" [options]="listaAldeia"
                                                     optionLabel="nome" placeholder="Selecione a Aldeia" [filter]="true"
                                                     filterBy="nome" [showClear]="true"
                                                     (onFilter)="aldeiaFilter($event)" (onpanelHide)="onPanelHide()"
                                                     (onChange)="aldeiaOnChange($event)" (onClear)="onPanelHide()">
                                                 </p-select>
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="suco"
                                                     class="font-medium  mb-2 block">
                                                     Suco
                                                 </label>
                                                 <input formControlName="suco" id="suco" type="text" pInputText fluid />
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="posto"
                                                     class="font-medium  mb-2 block">
                                                     Posto Administrativo
                                                 </label>
                                                 <input formControlName="postoAdministrativo" id="postoAdministrativo"
                                                     type="text" pInputText fluid />
                                             </div>
                                             <div class="flex-auto">
                                                 <label for="municipio"
                                                     class="font-medium  mb-2 block">
                                                     Municipio
                                                 </label>
                                                 <input formControlName="municipio" id="municipio" type="text"
                                                     pInputText fluid />
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                             @if (categoria === 'COMERCIAL') {
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="tipoEstabelecimento"
                                     class="font-medium  mb-2 block">
                                     Tipo do Estabelecimento
                                 </label>
                                 <p-select formControlName="tipoEstabelecimento" inputId="tipoEstabelecimento"
                                     [options]="tipoEstabelecimentoOpts" optionLabel="name" fluid filterBy="name"
                                     [showClear]="true" placeholder="Selecione o Tipo de Estabelecimento">
                                 </p-select>
                             </div>
                             }@else {
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="tipoEmpresa"
                                     class="font-medium  mb-2 block">
                                     Tipo do Empresa
                                 </label>
                                 <p-select formControlName="tipoEmpresa" inputId="tipoEmpresa"
                                     [options]="tipoEmpresaOpts" optionLabel="name" optionValue="value" fluid
                                     filterBy="name" [showClear]="true" placeholder="Selecione o Tipo de Empresa">
                                 </p-select>
                             </div>
                             }

                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="caraterizacaoEstabelecimento"
                                     class="font-medium  mb-2 block">
                                     Caraterizacao do Estabelecimento
                                 </label>
                                 <p-select formControlName="caraterizacaoEstabelecimento"
                                     inputId="caraterizacaoEstabelecimento" [options]="caraterizacaEstabelecimentoOpts"
                                     optionLabel="name" fluid filterBy="name" [showClear]="true"
                                     placeholder="Selecione a Caraterizacao do Estabelecimento">
                                 </p-select>
                             </div>
                         </div>

                         <span class="text-xl font-bold mt-6 mb-3 block">
                             CARATERIZACAO DA ATIVIDADE
                         </span>
                         <div class="grid grid-cols-12 gap-4">
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="risco" class="font-medium  mb-2 block">
                                     Quanto ao Risco
                                 </label>
                                 <input formControlName="risco" id="risco" type="text" pInputText fluid />
                             </div>
                             @if (categoria === 'COMERCIAL') {
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="ato" class="font-medium  mb-2 block">
                                     Quanto ao tipo de Ato
                                 </label>
                                 <p-select formControlName="ato" inputId="ato" [options]="tipoAtoOpts"
                                     optionLabel="name" fluid filterBy="name" [showClear]="true"
                                     placeholder="Selecione o tipo de ato">
                                 </p-select>
                             </div>
                             }@else {
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="quantoAtividade"
                                     class="font-medium  mb-2 block">
                                     Quanto à atividade
                                 </label>
                                 <p-select formControlName="quantoAtividade" inputId="quantoAtividade"
                                     [options]="quantoAtividadeOpts" optionLabel="name" optionValue="value" fluid
                                     filterBy="name" [showClear]="true" placeholder="Selecione a atividade">
                                 </p-select>
                             </div>
                             }

                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="grupoAtividade"
                                     class="font-medium  mb-2 block">
                                     Tipo de Atividade no Estabelecimento
                                 </label>
                                 <p-select formControlName="grupoAtividade" (onChange)="tipoAtividadeChange($event)"
                                     inputId="grupoAtividade" [options]="listaGrupoAtividade" optionLabel="codigo" fluid
                                     [filter]="true" filterBy="codigo,descricao" [showClear]="true"
                                     placeholder="Selecione o tipo de atividade">
                                     <ng-template let-tipo #item>
                                         <div class="flex items-center gap-2">
                                             <span>{{tipo.codigo}} </span> - <span>{{tipo.descricao}} </span>
                                         </div>
                                     </ng-template>
                                 </p-select>
                             </div>
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="grupoAtividadeCodigo"
                                     class="font-medium  mb-2 block">
                                     Descricao
                                 </label>
                                 <input formControlName="grupoAtividadeCodigo" id="grupoAtividadeCodigo" type="text"
                                     pInputText fluid />
                             </div>
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="classeAtividade"
                                     class="font-medium  mb-2 block">
                                     Atividade Principal exercida no Estabelecimento
                                 </label>
                                 <p-select formControlName="classeAtividade"
                                     (onChange)="atividadePrincipalChange($event)" inputId="classeAtividade"
                                     [options]="listaClasseAtividade" optionLabel="codigo" fluid [filter]="true"
                                     filterBy="codigo,descricao" [showClear]="true"
                                     placeholder="Selecione a atividade principal">
                                     <ng-template let-tipo #item>
                                         <div class="flex items-center gap-2">
                                             <span>{{tipo.codigo}} </span> - <span>{{tipo.descricao}} </span>
                                         </div>
                                     </ng-template>
                                 </p-select>
                             </div>
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="classeAtividadeCodigo"
                                     class="font-medium  mb-2 block">
                                     Descricao
                                 </label>
                                 <input formControlName="classeAtividadeCodigo" id="classeAtividadeCodigo" type="text"
                                     pInputText fluid />
                             </div>

                             <div class="mb-6 col-span-12">
                                 <label for="alteracoes"
                                     class="font-medium  mb-2 block">
                                     Alteracoes a Averbar
                                 </label>
                                 <input formControlName="alteracoes" id="alteracoes" type="text" pInputText fluid />
                             </div>
                             @if (!this.showDataEmissaoCertAnterior) {
                             <div class="mb-6 col-span-12 md:col-span-6">
                                 <label for="dataEmissao"
                                     class="font-medium  mb-2 block">
                                     Data da Emissao do Certificado anterior
                                 </label>
                                 <p-date-picker formControlName="dataEmissaoCertAnterior" id="dataEmissaoCertAnterior"
                                     [showIcon]="true" [showButtonBar]="true" fluid dateFormat="dd/mm/yy"
                                     inputStyleClass="w-full" />
                             </div>
                             }

                             <div class="mb-6 col-span-12">
                                 <label for="observacao"
                                     class="font-medium  mb-2 block">
                                     Observacao
                                 </label>
                                 <input formControlName="observacao" id="observacao" type="text" pInputText fluid />
                             </div>

                             <div class="mb-6 col-span-12">
                                 <div class="mb-3">
                                     <span class="text-md font-bold">
                                         Documentos
                                     </span>
                                 </div>
                                 <p-fileupload name="files" [disabled]="!requestForm.valid" method="post"
                                     (onUpload)="onUploadDocs($event)" [maxFileSize]="maxFileSize" [multiple]="true"
                                     accept="application/pdf" mode="advanced" [url]="uploadURLDocs()">
                                     <ng-template #empty>
                                         @if (uploadedDocs.length === 0) {
                                         Arraste e largue os ficheiros aqui para carregar.
                                         }
                                     </ng-template>
                                     <ng-template #content>
                                         @if (uploadedDocs.length > 0) {
                                         <ul>
                                             @for (item of uploadedDocs; track $index) {
                                             <li>
                                                 <a class="cursor-pointer hover:underline hover:text-teal-300">
                                                     {{ item.nome }} - {{ bytesToMBs(item.tamanho) }}
                                                 </a>
                                                 &nbsp;
                                                 <p-button (click)="downloadDoc(item.id)" [loading]="downloadLoading"
                                                     icon="pi pi-download" [rounded]="true" [text]="true"
                                                     severity="success" />
                                                 &nbsp;
                                                 <p-button icon="pi pi-trash" [disabled]="disableAllForm"
                                                     [rounded]="true" [text]="true" [loading]="deleteLoading"
                                                     severity="danger" (click)="removeDoc(item)" />
                                             </li>
                                             }
                                         </ul>
                                         }
                                     </ng-template>
                                 </p-fileupload>
                             </div>
                         </div>
                     </form>
                     <p-button [label]="isNew? 'Guardar': 'Atualizar'" [disabled]="!requestForm.valid"
                         [icon]=" isNew? 'pi pi-save': 'pi pi-sync' " [loading]="pedidoLoading" iconPos="left"
                         (click)="submit(requestForm, activateCallback)" />
                     <div class="flex pt-6 justify-between">
                         <p-button label="Voltar" severity="secondary" icon="pi pi-arrow-left" iconPos="left"
                             (onClick)="activateCallback(1)" />
                         <p-button [disabled]="!pedidoId" label="Próximo" severity="secondary" icon="pi pi-arrow-right"
                             iconPos="right" (onClick)="activateCallback(3)" />
                     </div>
                 </ng-template>
             </p-step-panel>
             <!-- END Pedido Inscricao Cadastro -->

             <!-- Fatura -->
             <p-step-panel [value]="3">
                 <ng-template #content let-activateCallback="activateCallback">
                     <form [formGroup]="faturaForm">
                         <div class="flex flex-col">
                             <span class="text-xl font-bold mt-6 mb-4 block">
                                 Emitir uma Fatura
                             </span>
                             <div class="grid grid-cols-12 gap-4">
                                 <div class="mb-6 col-span-12">
                                     <label for="taxas"
                                         class="font-medium  mb-2 block">
                                         Ato da taxa
                                     </label>
                                     <p-multiselect formControlName="taxas" inputId="taxas" [options]="listaPedidoAto"
                                         optionLabel="ato" optionValue="id" fluid [showClear]="true"
                                         placeholder="Selecione o ato">
                                     </p-multiselect>
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="superficie"
                                         class="font-medium  mb-2 block">
                                         Superfície do estabelecimento comercial <span class="">(&#13217;)</span>
                                     </label>
                                     <p-inputgroup>
                                         <p-inputnumber formControlName="superficie" mode="decimal"
                                             [minFractionDigits]="2" [maxFractionDigits]="2" />
                                         <p-inputgroup-addon>
                                             <span class="text-2xl font-bold">&#13217;</span>
                                         </p-inputgroup-addon>
                                     </p-inputgroup>
                                 </div>
                                 <div class="mb-6 col-span-12 md:col-span-6">
                                     <label for="total"
                                         class="font-medium  mb-2 block">
                                         Total
                                     </label>
                                     <p-inputgroup>
                                         <p-inputgroup-addon>
                                             <span class="text-2xl font-bold">$</span>
                                         </p-inputgroup-addon>
                                         <p-inputnumber class="text-2xl" formControlName="total" mode="decimal"
                                             [minFractionDigits]="2" [maxFractionDigits]="2" />
                                     </p-inputgroup>
                                 </div>
                             </div>
                             <div class="grid grid-cols-12 gap-4">
                                 <div class="mb-6 col-span-12 md:col-span-4 flex justify-between">
                                     <p-button [label]="faturaId? 'Atualizar Fatura' : 'Emitir Fatura'"
                                         [icon]="faturaId? 'pi pi-sync' : 'pi pi-file'" iconPos="left"
                                         [loading]="faturaLoading" class="w-auto mt-3"
                                         [disabled]="!faturaForm.valid || disableAllForm"
                                         (click)="saveFatura(faturaForm)" />
                                     @if (faturaId) {
                                     <p-button label="Baixar Fatura" [routerLink]="['fatura-inscricao']"
                                         [outlined]="true" icon="pi pi-download" iconPos="left" class="w-auto mt-3" />
                                     }
                                 </div>
                             </div>

                             @if (faturaId) {
                             <span class="text-xl font-bold mt-6 mb-3 block">
                                 Carregar Recibo
                             </span>
                             <div class="card">
                                 <p-fileupload name="file" [disabled]="uploadedFiles.length > 0" method="put"
                                     (onUpload)="onUpload($event, 'advanced')" [maxFileSize]="maxFileSize"
                                     [multiple]="false" accept="application/pdf" mode="advanced" [url]="uploadUrl()">
                                     <ng-template #empty>
                                         @if (uploadedFiles.length === 0) {
                                         Arraste e largue os ficheiros aqui para carregar.
                                         }
                                     </ng-template>
                                     <ng-template #content>
                                         @if (uploadedFiles.length > 0) {
                                         <ul>
                                             @for (file of uploadedFiles; track $index) {
                                             <li>
                                                 <a class="cursor-pointer hover:underline hover:text-teal-300">
                                                     {{ file.nome }} - {{ bytesToMBs(file.tamanho) }}
                                                 </a>
                                                 &nbsp;
                                                 <p-button (click)="downloadFile(file)" [loading]="downloadLoading"
                                                     icon="pi pi-download" [rounded]="true" [text]="true"
                                                     severity="success" />
                                                 &nbsp;
                                                 <p-button [disabled]="disableAllForm" icon="pi pi-trash"
                                                     [rounded]="true" [text]="true" [loading]="deleteLoading"
                                                     severity="danger" (click)="removeFile(file)" />
                                             </li>
                                             }
                                         </ul>
                                         }
                                     </ng-template>
                                 </p-fileupload>
                             </div>
                             }
                         </div>
                     </form>
                     <div class="flex pt-6 justify-between">
                         <p-button label="Voltar" severity="secondary" icon="pi pi-arrow-left" iconPos="left"
                             (onClick)="activateCallback(2)" />
                         <p-button (click)="submitAplicante(activateCallback)" [loading]="aplicanteLoading"
                             [disabled]="uploadedFiles.length === 0 || disableAllForm" label="Submeter"
                             icon="pi pi-save" iconPos="left" />
                     </div>
                 </ng-template>
             </p-step-panel>

             <!-- End Fatura -->
         </p-step-panels>
     </p-stepper>
 </div>